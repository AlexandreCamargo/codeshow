(function(n,t){var i=typeof exports=="object"&&exports&&(typeof n=="object"&&n&&n==n.global&&(window=n),exports);typeof define=="function"&&define.amd?define(["rx","exports"],function(i,r){return n.Rx=t(n,r,i),n.Rx}):typeof module=="object"&&module&&module.exports==i?module.exports=t(n,module.exports,require("./rx")):n.Rx=t(n,{},n.Rx)})(this,function(n,t,i){function r(){if(this.isDisposed)throw new Error(g);}var f=i.Observable,u=f.prototype,s=i.Internals.AnonymousObservable,h=i.Subject,c=i.AsyncSubject,l=i.Observer,b=i.Internals.ScheduledObserver,a=i.Disposable.create,k=i.Disposable.empty,v=i.CompositeDisposable,d=i.Scheduler.currentThread,e=i.Internals.inherits,y=i.Internals.addProperties,g="Object has been disposed",o;u.multicast=function(n,t){var i=this;return typeof n=="function"?new s(function(r){var u=i.multicast(n());return new v(t(u).subscribe(r),u.connect())}):new nt(i,n)},u.publish=function(n){return n?this.multicast(function(){return new h},n):this.multicast(new h)},u.publishLast=function(n){return n?this.multicast(function(){return new c},n):this.multicast(new c)},u.publishValue=function(n,t){return arguments.length===2?this.multicast(function(){return new p(t)},n):this.multicast(new p(n))},u.replay=function(n,t,i,r){return n?this.multicast(function(){return new w(t,i,r)},n):this.multicast(new w(t,i,r))},o=function(n,t){this.subject=n,this.observer=t},o.prototype.dispose=function(){if(!this.subject.isDisposed&&this.observer!==null){var n=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(n,1),this.observer=null}};var p=i.BehaviorSubject=function(){function t(n){var t;if(r.call(this),!this.isStopped){this.observers.push(n);n.onNext(this.value);return new o(this,n)}if(t=this.exception,t)n.onError(t);else n.onCompleted();return k}function n(i){n.super_.constructor.call(this,t),this.value=i,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.exception=null}return e(n,f),y(n.prototype,l,{onCompleted:function(){var t,n,i;if(r.call(this),!this.isStopped){for(t=this.observers.slice(0),this.isStopped=!0,n=0,i=t.length;n<i;n++)t[n].onCompleted();this.observers=[]}},onError:function(n){var i,t,u;if(r.call(this),!this.isStopped){for(i=this.observers.slice(0),this.isStopped=!0,this.exception=n,t=0,u=i.length;t<u;t++)i[t].onError(n);this.observers=[]}},onNext:function(n){var i,t,u;if(r.call(this),!this.isStopped)for(this.value=n,i=this.observers.slice(0),t=0,u=i.length;t<u;t++)i[t].onNext(n)},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null}}),n}(),w=i.ReplaySubject=function(){function i(n){var i=new b(this.scheduler,n),o=new t(this,i),u,f,e;for(r.call(this),this._trim(this.scheduler.now()),this.observers.push(i),u=this.q.length,f=0,e=this.q.length;f<e;f++)i.onNext(this.q[f].value);if(this.hasError){u++;i.onError(this.error)}else this.isStopped&&(u++,i.onCompleted());return i.ensureActive(u),o}function n(t,r,u){this.bufferSize=t==null?Number.MAX_VALUE:t,this.window=r==null?Number.MAX_VALUE:r,this.scheduler=u||d,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,n.super_.constructor.call(this,i)}var t=function(n,t){this.subject=n,this.observer=t};return t.prototype.dispose=function(){if(this.observer.dispose(),!this.subject.isDisposed){var n=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(n,1)}},e(n,f),y(n.prototype,l,{_trim:function(n){while(this.q.length>this.bufferSize)this.q.shift();while(this.q.length>0&&n-this.q[0].interval>this.window)this.q.shift()},onNext:function(n){var i,u,f,t,e;if(r.call(this),!this.isStopped)for(u=this.scheduler.now(),this.q.push({interval:u,value:n}),this._trim(u),f=this.observers.slice(0),t=0,e=f.length;t<e;t++){i=f[t];i.onNext(n);i.ensureActive()}},onError:function(n){var i,f,u,t,e;if(r.call(this),!this.isStopped){for(this.isStopped=!0,this.error=n,this.hasError=!0,f=this.scheduler.now(),this._trim(f),u=this.observers.slice(0),t=0,e=u.length;t<e;t++){i=u[t];i.onError(n);i.ensureActive()}this.observers=[]}},onCompleted:function(){var t,u,i,n,f;if(r.call(this),!this.isStopped){for(this.isStopped=!0,u=this.scheduler.now(),this._trim(u),i=this.observers.slice(0),n=0,f=i.length;n<f;n++)t=i[n],t.onCompleted(),t.ensureActive();this.observers=[]}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(),nt=function(){function n(t,i){var r={subject:i,source:t.asObservable(),hasSubscription:!1,subscription:null},u;this.connect=function(){return r.hasSubscription||(r.hasSubscription=!0,r.subscription=new v(r.source.subscribe(r.subject),a(function(){r.hasSubscription=!1}))),r.subscription},u=function(n){return r.subject.subscribe(n)},n.super_.constructor.call(this,u)}return e(n,f),n.prototype.connect=function(){return this.connect()},n.prototype.refCount=function(){var t=null,n=0,i=this;return new s(function(r){var u,f;return n++,u=n===1,f=i.subscribe(r),u&&(t=i.connect()),a(function(){f.dispose(),n--,n===0&&t.dispose()})})},n}();return i})
//@ sourceMappingURL=rx.binding.min.js.map