(function(n,t){var i=typeof exports=="object"&&exports&&(typeof n=="object"&&n&&n==n.global&&(window=n),exports);typeof define=="function"&&define.amd?define(["rx","exports"],function(i,r){return n.Rx=t(n,r,i),n.Rx}):typeof module=="object"&&module&&module.exports==i?module.exports=t(n,module.exports,require("./rx")):n.Rx=t(n,{},n.Rx)})(this,function(n,t,i){function o(n,t){return n===t}function s(n){return n}function h(n,t){return n>t?1:n===t?0:-1}function c(n,t,i){return new u(function(r){var e=!1,u=null,f=[];return n.subscribe(function(n){var o,s;try{s=t(n)}catch(h){r.onError(h);return}if(o=0,e)try{o=i(s,u)}catch(c){r.onError(c);return}else e=!0,u=s;o>0&&(u=s,f=[]),o>=0&&f.push(n)},r.onError.bind(r),function(){r.onNext(f);r.onCompleted()})})}function l(n){if(n.length==0)throw new Error(f);return n[0]}function k(n,t,i){return new u(function(r){var u=0,f=t.length;return n.subscribe(function(n){var e=!1;try{u<f&&(e=i(n,t[u++]))}catch(o){r.onError(o);return}if(!e){r.onNext(!1);r.onCompleted()}},r.onError.bind(r),function(){r.onNext(u===f);r.onCompleted()})})}function a(n,t,i,r){if(t<0)throw new Error(e);return new u(function(u){var f=t;return n.subscribe(function(n){if(f===0){u.onNext(n);u.onCompleted()}f--},u.onError.bind(u),function(){if(i){u.onNext(r);u.onCompleted()}else u.onError(new Error(e))})})}function v(n,t,i){return new u(function(r){var e=i,u=!1;return n.subscribe(function(n){if(u)r.onError(new Error("Sequence contains more than one element"));else e=n,u=!0},r.onError.bind(r),function(){if(u||t){r.onNext(e);r.onCompleted()}else r.onError(new Error(f))})})}function y(n,t,i){return new u(function(r){return n.subscribe(function(n){r.onNext(n);r.onCompleted()},r.onError.bind(r),function(){if(t){r.onNext(i);r.onCompleted()}else r.onError(new Error(f))})})}function p(n,t,i){return new u(function(r){var u=i,e=!1;return n.subscribe(function(n){u=n,e=!0},r.onError.bind(r),function(){if(e||t){r.onNext(u);r.onCompleted()}else r.onError(new Error(f))})})}var w=i.Observable,r=w.prototype,b=i.CompositeDisposable,u=i.Internals.AnonymousObservable,e="Argument out of range",f="Sequence contains no elements.";return r.aggregate=function(){var t,i,n;return arguments.length===2?(t=arguments[0],i=!0,n=arguments[1]):n=arguments[0],i?this.scan(t,n).startWith(t).finalValue():this.scan(n).finalValue()},r.any=function(n){var t=this;return n?t.where(n).any():new u(function(n){return t.subscribe(function(){n.onNext(!0);n.onCompleted()},n.onError.bind(n),function(){n.onNext(!1);n.onCompleted()})})},r.isEmpty=function(){return this.any().select(function(n){return!n})},r.all=function(n){return this.where(function(t){return!n(t)}).any().select(function(n){return!n})},r.contains=function(n,t){return t||(t=o),this.where(function(i){return t(i,n)}).any()},r.count=function(n){return n?this.where(n).count():this.aggregate(0,function(n){return n+1})},r.sum=function(n){return n?this.select(n).sum():this.aggregate(0,function(n,t){return n+t})},r.minBy=function(n,t){return t||(t=h),c(this,n,function(n,i){return t(n,i)*-1})},r.min=function(n){return this.minBy(s,n).select(function(n){return l(n)})},r.maxBy=function(n,t){return t||(t=h),c(this,n,t)},r.max=function(n){return this.maxBy(s,n).select(function(n){return l(n)})},r.average=function(n){return n?this.select(n).average():this.scan({sum:0,count:0},function(n,t){return{sum:n.sum+t,count:n.count+1}}).finalValue().select(function(n){return n.sum/n.count})},r.sequenceEqual=function(n,t){var i=this;return(t||(t=o),Array.isArray(n))?k(i,n,t):new u(function(r){var e=!1,o=!1,u=[],f=[],s=i.subscribe(function(n){var i,e;if(f.length>0){e=f.shift();try{i=t(e,n)}catch(s){r.onError(s);return}if(!i){r.onNext(!1);r.onCompleted()}}else if(o){r.onNext(!1);r.onCompleted()}else u.push(n)},r.onError.bind(r),function(){if(e=!0,u.length===0)if(f.length>0){r.onNext(!1);r.onCompleted()}else if(o){r.onNext(!0);r.onCompleted()}}),h=n.subscribe(function(n){var i,o;if(u.length>0){o=u.shift();try{i=t(o,n)}catch(s){r.onError(s);return}if(!i){r.onNext(!1);r.onCompleted()}}else if(e){r.onNext(!1);r.onCompleted()}else f.push(n)},r.onError.bind(r),function(){if(o=!0,f.length===0)if(u.length>0){r.onNext(!1);r.onCompleted()}else if(e){r.onNext(!0);r.onCompleted()}});return new b(s,h)})},r.elementAt=function(n){return a(this,n,!1)},r.elementAtOrDefault=function(n,t){return a(this,n,!0,t)},r.single=function(n){return n?this.where(n).single():v(this,!1)},r.singleOrDefault=function(n,t){return n?this.where(n).singleOrDefault(null,t):v(this,!0,t)},r.first=function(n){return n?this.where(n).first():y(this,!1)},r.firstOrDefault=function(n,t){return n?this.where(n).firstOrDefault(null,t):y(this,!0,t)},r.last=function(n){return n?this.where(n).last():p(this,!1)},r.lastOrDefault=function(n,t){return n?this.where(n).lastOrDefault(null,t):p(this,!0,t)},i})
//@ sourceMappingURL=rx.aggregates.min.js.map